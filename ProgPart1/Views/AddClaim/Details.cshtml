@model ProgPart1.Models.Claims;
@{
	ViewBag.Title = "Claims Details";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<nav class="mb-4">
	<ol class="breadcrumb">
		<li class="breadcrumb-item"><a href="/">Home</a></li>
		<li class="breadcrumb-item"><a href="/AddClaim">Claims</a></li>
		<li class="breadcrumb-item active">Claim Details</li>
	</ol>
</nav>

@if (TempData["Error"] != null)
{
	<div class="alert alert-danger">@TempData["Error"]</div>
}

<div class="row">
	<div class="col-lg-8">
		<div class="card">
			<div class="card-header d-flex justify-content-between">
				<h4>@Model.SubmittedBy</h4>
				@if (Model.Status == ProgPart1.Models.ClaimStatus.Pending)
				{
					<span class="badge bg-warning">Pending Review</span>
				}
				else if (Model.Status == ProgPart1.Models.ClaimStatus.Approved)
				{
					<span class="badge bg-success">Approved</span>
				}
				else
				{
					<span class="badge bg-danger">Declined</span>
				}
			</div>
			<div class="card-body">
				<div class="row mb-3">
					<div class="col-sm-3"><strong>Month</strong></div>
					<div class="col-sm-9">@Model.Month</div>
				</div>
				<div class="row mb-3">
					<div class="col-sm-3"><strong>Taught</strong></div>
					<div class="col-sm-9">@Model.Taught</div>
				</div>
				<div class="row mb-3">
					<div class="col-sm-3"><strong>Amount</strong></div>
					<div class="col-sm-9">@Model.Amount</div>
				</div>
				<div class="row mb-3">
					<div class="col-sm-3"><strong>Description</strong></div>
					<div class="col-sm-9">
						@Model.Description
					</div>
				</div>
				<div"row mb-3">
					<div class="col-sm-3"><strong>Submitted</strong></div>
					<div class="col-sm-9">@Model.SubmittedDate.ToString("MM-dd-yyyy")</div>
			</div>
		</div>
	</div>
</div>

<div class="col-lg-4">
	<div class="card">
		<div class="card-header">
			<h5>Supporting Documents (@Model.Documents.Count)</h5>
		</div>
		<div class="card-body">
			@if (Model.Documents.Count == 0)
			{
				<p class="text-muted">No Documents Uploaded</p>
			}
			else
			{
				<div class="list-group list-group-flush">
					@foreach (var doc in Model.Documents)
					{
						<div class="list-group-item">
							<div class="d-flex justify-content-between align-items-start">
								<div class="flex-grow-1">
									<strong> @doc.FileName</strong>
									<small class="text-muted">
										@doc.FileSize KB
										@doc.UploadedDate.ToString("MM dd, yyyy")
									</small>
								</div>
								<a href="/Claims/DownloadDocument?ClaimId=@Model.Id&docId=@doc.Id"
								   class="btn btn-sm btn-primary">
									Download
								</a>
							</div>
						</div>
					}
				</div>
			}
		</div>
	</div>
	<div class="text-center mt-4">
		<a href="/AddClaim/Index" class="btn btn-secondary">⬅ Back</a>
	</div>
</div>

